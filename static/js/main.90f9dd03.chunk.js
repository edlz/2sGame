(this["webpackJsonp2048-clone"]=this["webpackJsonp2048-clone"]||[]).push([[0],{19:function(e,t,a){},24:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},29:function(e,t,a){},30:function(e,t,a){"use strict";a.r(t);var r=a(0),c=a.n(r),n=a(7),s=a.n(n),o=(a(19),a(3)),u=a(4),i=a(13),l=a(14),v=a(2),j="ADD_SCORE",f="RESET_SCORE",b={score:0,best:0},d=Object(u.combineReducers)({score:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0,a=t.type,r=t.payload;switch(a){case j:return Object(v.a)(Object(v.a)({},e),{},{score:e.score+r});case f:return e.score>e.best?Object(v.a)(Object(v.a)({},e),{},{best:e.score,score:0}):Object(v.a)(Object(v.a)({},e),{},{score:0});default:return e}}}),O=[l.a],h=Object(u.createStore)(d,{},Object(i.composeWithDevTools)(u.applyMiddleware.apply(void 0,O))),p=a(5),m=a(9),x=(a(24),a(1)),N=function(e){var t=e.piece;return Object(x.jsx)(r.Fragment,{children:t.value>0&&Object(x.jsx)("div",{className:"piece piece-state-".concat(t.state," tile-").concat(t.value," loc-").concat(t.pos),children:Object(x.jsx)("div",{className:"piece-number",children:t.value})})})},g=(a(26),function(e){var t=e.onRestart;return Object(x.jsxs)("div",{className:"msg-container",children:[Object(x.jsx)("div",{className:"game-over",children:"Game over!"}),Object(x.jsx)("a",{className:"retry-btn",onClick:function(){t()},children:"Try Again"})]})}),S=Object(o.b)(null,{addScore:function(e){return function(t){t({type:j,payload:e})}},resetScore:function(){return function(e){e({type:f})}}})((function(e){var t=e.addScore,a=e.resetScore,c=Object(r.useState)(!1),n=Object(m.a)(c,2),s=n[0],o=n[1],u=Object(r.useState)(!1),i=Object(m.a)(u,2),l=i[0],v=i[1],j=Object(r.useState)([{value:0,state:0,pos:0},{value:0,state:0,pos:1},{value:0,state:0,pos:2},{value:0,state:0,pos:3},{value:0,state:0,pos:4},{value:0,state:0,pos:5},{value:0,state:0,pos:6},{value:0,state:0,pos:7},{value:0,state:0,pos:8},{value:0,state:0,pos:9},{value:0,state:0,pos:10},{value:0,state:0,pos:11},{value:0,state:0,pos:12},{value:0,state:0,pos:13},{value:0,state:0,pos:14},{value:0,state:0,pos:15}]),f=Object(m.a)(j,2),b=f[0],d=f[1];Object(r.useEffect)((function(){window.addEventListener("keydown",(function(e){e.repeat||O(e)}),!1),E(),E()}),[]);var O=function(e){var t=e.key,a=!1;if(!l){var r=Object(p.a)(b);switch(r.forEach((function(e){return e.state=0})),d(r),v(!0),t){case"w":a=k();break;case"s":a=C();break;case"a":a=R();break;case"d":a=F()}if(a&&(E(),T()))return void o(!0);v(!1)}},h=function(e){var t=[];for(e-=4;e>=0;)t.push(e),e-=4;return t},S=function(e){var t=[];for(e+=4;e<Math.pow(4,2);)t.push(e),e+=4;return t},y=function(e){if((e+1)%4===0)return[];for(var t=[],a=4*Math.floor(++e/4)+4;e<a;)t.push(e++);return t},w=function(e){if(e%4===0)return[];for(var t=[],a=4*Math.floor(--e/4);e>=a;)t.push(e--);return t},E=function(){for(var e=[],t=0;t<16;t++)0===b[t].value&&e.push(t);if(e.length>0){var a=Object(p.a)(b),r=e[Math.floor(Math.random()*e.length)];a[r].value=Math.random()<.15?4:2,a[r].state=2,d(a)}},M=function(e,a){var r=-1,c=!1;if(a.every((function(a){if(0===b[a].value)return r=a,!0;if(b[a].value===b[e].value&&0===b[a].state){var n=Object(p.a)(b);return n[a].value=2*n[a].value,t(2*n[a].value),n[a].state=1,n[e].value=0,n[e].state=0,d(n),c=!0,!1}return!1})),!c&&r>=0&&r<Math.pow(4,2)){var n=Object(p.a)(b);return n[r].value=n[e].value,n[r].state=0,n[e].value=0,n[e].state=0,d(n),!0}return c},k=function(){for(var e=!1,t=1;t<4;t++)for(var a=0;a<4;a++){var r=4*t+a;0!==b[r].value&&M(r,h(r))&&(e=!0)}return e},C=function(){for(var e=!1,t=2;t>=0;t--)for(var a=0;a<4;a++){var r=4*t+a;0!==b[r].value&&M(r,S(r))&&(e=!0)}return e},F=function(){for(var e=!1,t=0;t<4;t++)for(var a=2;a>=0;a--){var r=4*t+a;0!==b[r].value&&M(r,y(r))&&(e=!0)}return e},R=function(){for(var e=!1,t=0;t<4;t++)for(var a=1;a<4;a++){var r=4*t+a;0!==b[r].value&&M(r,w(r))&&(e=!0)}return e},T=function(){if(b.filter((function(e){return 0===e.value})).length<=0){for(var e=0;e<4;e++)for(var t=b[4*e].value,a=b[e].value,r=1;r<=3;r++){var c=4*e+r,n=e+4*r;if(t===b[c].value)return!1;if(a===b[n].value)return!1;t=b[c].value,a=b[n].value}return!0}return!1};return Object(x.jsxs)(r.Fragment,{children:[Object(x.jsx)("div",{className:"piece-container",children:b.map((function(e){return Object(x.jsx)(N,{piece:e},e.pos)}))}),s&&Object(x.jsx)(g,{onRestart:function(){for(var e=Object(p.a)(b),t=0;t<16;t++)e[t].value=0,e[t].state=0;a(),E(),E(),o(!1)}})]})})),y=(a(27),function(){for(var e=[],t=0;t<4;t++)e.push(Object(x.jsx)("div",{className:"row-item"},t));for(var a=[],r=0;r<4;r++)a.push(Object(x.jsx)("div",{className:"row",children:e},r));return Object(x.jsxs)("div",{className:"game-container",children:[Object(x.jsx)("div",{className:"grid",children:a}),Object(x.jsx)(S,{})]})}),w=(a(28),Object(o.b)((function(e){return{score:e.score.score,best:e.score.best}}),{})((function(e){var t=e.score,a=e.best;return Object(x.jsxs)(r.Fragment,{children:[Object(x.jsxs)("div",{className:"header-container",children:[Object(x.jsx)("div",{className:"title-container",children:Object(x.jsx)("div",{className:"title",children:"2048"})}),Object(x.jsxs)("div",{className:"score-container",children:[Object(x.jsxs)("div",{className:"score",children:[Object(x.jsx)("div",{className:"score-label",children:"SCORE"}),Object(x.jsx)("div",{className:"score-number",children:t})]}),Object(x.jsxs)("div",{className:"score",children:[Object(x.jsx)("div",{className:"score-label",children:"BEST"}),Object(x.jsx)("div",{className:"score-number",children:a})]})]})]}),Object(x.jsx)("div",{className:"instructions-text",children:" Use W A S D to play."})]})})));a(29);var E=function(){return Object(x.jsx)(o.a,{store:h,children:Object(x.jsxs)("div",{className:"App",children:[Object(x.jsx)(w,{}),Object(x.jsx)(y,{})]})})},M=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,31)).then((function(t){var a=t.getCLS,r=t.getFID,c=t.getFCP,n=t.getLCP,s=t.getTTFB;a(e),r(e),c(e),n(e),s(e)}))};s.a.render(Object(x.jsx)(c.a.StrictMode,{children:Object(x.jsx)(E,{})}),document.getElementById("root")),M()}},[[30,1,2]]]);
//# sourceMappingURL=main.90f9dd03.chunk.js.map